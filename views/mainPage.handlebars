<!DOCTYPE html>
<html>

<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

    <script>
        $(document).ready(function(){

            $('#addbtn').click(function() {


                $('#blah').append('<li  id="edit'+(sessionStorage.length-1)+'">' + sessionStorage.getItem("key"+(sessionStorage.length-1)) + '</li>');
                        console.log("key"+(sessionStorage.length-1));

                document.getElementById("myInput").value = "";
                console.log(sessionStorage);
                closeButtons();

                gtag('create','UA-115036537-1', 'auto');

                // Feature detects Navigation Timing API support.
                if (window.performance) {
                  // Gets the number of milliseconds since page load
                  // (and rounds the result since the value must be an integer).
                  var timeSincePageLoad = Math.round(performance.now());

                  // Sends the timing event to Google Analytics.
                  gtag('event', 'addClick', {
                    'name': 'add',
                    'value': timeSincePageLoad,
                    'event_category': 'addTime'
                  });
                }

    // gtag('event','addClick',{
    //                 'name': 'add',
    //                 'value': timeSincePageLoad,
    //                 'event_category': 'addTime'
    //               });
            });

            $('#addbtn1').click(function() {


                $('#blah').append('<li  id="edit'+(sessionStorage.length-1)+'">' + sessionStorage.getItem("key"+(sessionStorage.length-1)) + '</li>');
                        console.log("key"+(sessionStorage.length-1));

                document.getElementById("myInput").value = "";
                console.log(sessionStorage);
                closeButtons();

                gtag('create','UA-115036537-1', 'auto');

                // Feature detects Navigation Timing API support.
                if (window.performance) {
                  // Gets the number of milliseconds since page load
                  // (and rounds the result since the value must be an integer).
                  var timeSincePageLoad = Math.round(performance.now());

                  // Sends the timing event to Google Analytics.
                  gtag('event', 'addClickAlt', {
                    'name': 'addAlt',
                    'value': timeSincePageLoad,
                    'event_category': 'addTime'
                  });
                }

    // gtag('event','addClick',{
    //                 'name': 'add',
    //                 'value': timeSincePageLoad,
    //                 'event_category': 'addTime'
    //               });
            });
        });

    window.addEventListener("beforeunload", function saveEdit(){

        for(var i=0;i<sessionStorage.length;i++){
                            sessionStorage.setItem("key" + i, $("#edit" + i).text());
                    
        };
    });
</script>


    <!--Added styling to this page in mainPage.css-->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="../css/bootstrap.css">
    <link rel="stylesheet" href="../css/bootstrap-theme.css">
    <link rel="stylesheet" href="../css/bootstrap.min.css">
    <link rel="stylesheet" href="../css/mainPage.css">
    <link rel="stylesheet" href="/css/navb.css">
    <link rel="stylesheet" href="../css/wholeAppDesign.css">
</head>

<body>

    <nav class="navbar">
        <div class="container-fluid">
            <div class="navbar-header">
                <a class="navbar-center" href="#">Algo-writer</a>
            </div>

        </div>
    </nav>



<div id="myDIV" class="header">
    <h2 style="margin:5px">My Algorithm</h2>

{{#unless viewAlt}}

    <input type="text" id="myInput" placeholder="Next Step">
    <span id='addbtn' onclick="appendToStorage()" class="addBtn">Add</span>
{{/unless}}


</div>

<div id="div" class="btn-group" style="width:100%">
    <div>
        <button class="buttonTopRow" style="width:33.3%; background-color:#00bfa5"><a href="details">Details</a></button>
    </div>
    <div>
        <button class="buttonTopRow" style="width:33.3%; background-color:#00bfa5"><a href="yourparameters">Parameters</a></button>
    </div>
    <div>
        <button class="buttonTopRow" style="width:33.3%; background-color:#00bfa5"><a href="tips">Quick Tips</a></button>
    </div>
</div>

<div class='container'>
<ul id="myUL">
    <p id="ex">Click the '+ button' to add your first step! You can edit and delete your steps once you've added them!</p>
    <div id="blah" contenteditable=true>
        
        <!--<li class="closeable">You can add, delete, and edit steps</li>-->
        <!--<li class="checked closeable">Not sure you want to delete a step? Just cross it out by tapping the line!</li> -->
    </div>
</ul>
</div>

<br>

{{#if viewAlt}}
<div class='container'>
    <input type="text" id="myInput" placeholder="Next Step">
    <span id='addbtn1' style="margin-left: 8px" onclick="appendToStorage()" class="addBtn" >
        <span class="glyphicon glyphicon-plus"></span>
    </span>
</div>
{{/if}}

<script src="../js/mainPage.js"></script>

<br>
<div class="container">
<form>
<!-- <div id="div" class="btn-group2" style="width:100%"> -->
    <button type="submit" class="button" style="height:60px; width:47%;margin-right: 6%" formaction="index">Save and Quit</button>
<!--     <div class="divider"/> -->
    {{#unless viewAlt}}
    <button type="submit" class="buttonSeeRec" style="height:60px; width:47%; background-color:#00bfa5" formaction="suggestions"><span>See Recommendations</span></button>
    {{else}}
    
        <button type="submit" class="buttonSeeRec" style="height:60px; width:47%; background-color:#00bfa5" formaction="suggestions"><span>See Recommendations</span></button>

    {{/unless}}
<!-- </div> -->
</form>
</div>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-115036537-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-115036537-1');
</script>

</body>

</html>